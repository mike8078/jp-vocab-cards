<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>日文單字卡（可發音＋測驗模式）</title>
<meta name="description" content="日文單字卡：搜尋、發音、洗牌、測驗模式。支援手機加到主畫面。">
<style>
  :root { --bg:#0f1220; --card:#1b1f36; --text:#e9ecf1; --muted:#a8b0c3; --accent:#7aa2ff; --border:#2a3050; }
  * { box-sizing: border-box; }
  body { margin:0; font-family:-apple-system,BlinkMacSystemFont,"Noto Sans TC","Hiragino Kaku Gothic ProN","Yu Gothic","Microsoft JhengHei",Arial,sans-serif; background:linear-gradient(180deg,#0b0e1a,#12162a); color:var(--text); }
  header { position:sticky; top:0; z-index:10; background:rgba(18,22,42,.9); backdrop-filter:blur(8px); border-bottom:1px solid var(--border); padding:12px 16px; }
  h1 { font-size:18px; margin:0 0 8px; }
  .toolbar { display:grid; grid-template-columns:1fr auto auto auto auto; gap:8px; align-items:center; }
  input[type="search"] { width:100%; padding:10px 12px; border-radius:10px; border:1px solid var(--border); background:var(--card); color:var(--text); outline:none; }
  button { padding:10px 12px; border:1px solid var(--border); background:var(--card); color:var(--text); border-radius:10px; }
  button:active { transform:scale(.98); }
  main { padding:12px 12px 24px; }
  .grid { display:grid; grid-template-columns:repeat(auto-fill, minmax(240px,1fr)); gap:10px; }
  .card { background:var(--card); border:1px solid var(--border); border-radius:14px; padding:14px; display:flex; flex-direction:column; gap:6px; min-height:120px; }
  .jp { font-size:22px; font-weight:700; letter-spacing:.02em; }
  .kana { font-size:16px; color:var(--muted); }
  .zh { font-size:15px; }
  .actions { margin-top:6px; display:flex; gap:8px; flex-wrap:wrap; }
  .pill { padding:6px 10px; border-radius:999px; border:1px solid var(--border); background:#10142a; font-size:13px; color:var(--text); }
  .empty { text-align:center; opacity:.8; padding:40px 0; }
  footer { color:var(--muted); text-align:center; padding:16px 0 32px; }
</style>
</head>
<body>
<header>
  <h1>日文單字卡（可發音＋測驗模式）</h1>
  <div class="toolbar">
    <input id="q" type="search" placeholder="搜尋：日文 / 假名 / 中文意思" />
    <button id="shuffle">洗牌</button>
    <button id="ttsAll">全部發音</button>
    <button id="addToHome">+ 主畫面</button>
    <button id="quizToggle">測驗模式</button>
  </div>
</header>
<main>
  <div id="grid" class="grid"></div>
  <div id="empty" class="empty" style="display:none">找不到符合的單字</div>
</main>
<footer>提示：點「🔊」播放日文（ja‑JP）/ 中文（zh‑TW）發音；開啟「測驗模式」時先只顯示日文，點卡片翻開答案。</footer>

<script>
// 內嵌資料（可自行替換/新增）
const DATA = [{"日文": "営　業　時　間", "假名": "えいぎょうじかん", "中文意思": "營業時間"}, {"日文": "朝", "假名": "あさ", "中文意思": "早晨"}, {"日文": "午後", "假名": "ごご", "中文意思": "下午"}, {"日文": "宿題", "假名": "しゅくだい", "中文意思": "作業、功課"}, {"日文": "毎晩", "假名": "まいばん", "中文意思": "每天晚上"}, {"日文": "毎日", "假名": "まいにち", "中文意思": "每天"}, {"日文": "仕事", "假名": "しごと", "中文意思": "工作"}, {"日文": "英語", "假名": "えいご", "中文意思": "英語"}, {"日文": "昼休み", "假名": "ひるやすみ", "中文意思": "午休"}, {"日文": "時計", "假名": "とけい", "中文意思": "時鐘"}, {"日文": "教室", "假名": "きょうしつ", "中文意思": "教室"}, {"日文": "教科書", "假名": "きょうかしょ", "中文意思": "教科書"}, {"日文": "野球", "假名": "やきゅう", "中文意思": "棒球"}, {"日文": "地球儀", "假名": "ちきゅうぎ", "中文意思": "地球儀"}, {"日文": "試着室", "假名": "しちゃくしつ", "中文意思": "試衣間"}, {"日文": "試着します", "假名": "しちゃくします", "中文意思": "試穿"}, {"日文": "カメラ", "假名": "かめら", "中文意思": "相機"}, {"日文": "写真を撮る", "假名": "しゃしんをとる", "中文意思": "拍照"}, {"日文": "図書館", "假名": "としょかん", "中文意思": "圖書館"}, {"日文": "郵便局", "假名": "ゆうびんきょく", "中文意思": "郵局"}, {"日文": "手紙を出す", "假名": "てがみをだす", "中文意思": "寄信"}, {"日文": "ポスト", "假名": "ぽすと", "中文意思": "郵筒"}, {"日文": "砂糖", "假名": "さとう", "中文意思": "砂糖"}, {"日文": "塩", "假名": "しお", "中文意思": "鹽"}, {"日文": "酢", "假名": "す", "中文意思": "醋"}, {"日文": "醤油", "假名": "しょうゆ", "中文意思": "醬油"}, {"日文": "味噌", "假名": "みそ", "中文意思": "味噌"}, {"日文": "会社員", "假名": "かいしゃいん", "中文意思": "公司職員"}, {"日文": "社長", "假名": "しゃちょう", "中文意思": "社長"}, {"日文": "株式会社", "假名": "かぶしきがいしゃ", "中文意思": "股份有限公司"}, {"日文": "会社", "假名": "かいしゃ", "中文意思": "公司"}, {"日文": "給料", "假名": "きゅうりょう", "中文意思": "薪水"}, {"日文": "少ない", "假名": "すくない", "中文意思": "少"}, {"日文": "時給", "假名": "じきゅう", "中文意思": "時薪"}, {"日文": "無料", "假名": "むりょう", "中文意思": "免費"}, {"日文": "有料", "假名": "ゆうりょう", "中文意思": "收費"}, {"日文": "銀行", "假名": "ぎんこう", "中文意思": "銀行"}, {"日文": "明日", "假名": "あした", "中文意思": "明天"}, {"日文": "昨日", "假名": "きのう", "中文意思": "昨天"}, {"日文": "家族", "假名": "かぞく", "中文意思": "家人、家族"}, {"日文": "子供", "假名": "こども", "中文意思": "小孩"}, {"日文": "祖父母", "假名": "そふぼ", "中文意思": "祖父母"}, {"日文": "ご飯を食べる", "假名": "ごはんをたべる", "中文意思": "吃飯"}, {"日文": "鏡を見る", "假名": "かがみをみる", "中文意思": "照鏡子"}, {"日文": "帽子をかぶる", "假名": "ぼうしをかぶる", "中文意思": "戴帽子"}, {"日文": "卵焼き", "假名": "たまごやき", "中文意思": "玉子燒"}, {"日文": "涙", "假名": "なみだ", "中文意思": "眼淚"}, {"日文": "鼻水", "假名": "はなみず", "中文意思": "鼻水"}, {"日文": "鼻血", "假名": "はなぢ", "中文意思": "流鼻血"}, {"日文": "血", "假名": "ち", "中文意思": "血"}, {"日文": "風邪薬", "假名": "かぜぐすり", "中文意思": "感冒藥"}, {"日文": "薬", "假名": "くすり", "中文意思": "藥"}, {"日文": "紙", "假名": "かみ", "中文意思": "紙"}, {"日文": "手紙", "假名": "てがみ", "中文意思": "信件"}, {"日文": "唐揚げ", "假名": "からあげ", "中文意思": "炸雞"}, {"日文": "物", "假名": "もの", "中文意思": "物品"}, {"日文": "窓", "假名": "まど", "中文意思": "窗戶"}, {"日文": "電話", "假名": "でんわ", "中文意思": "電話"}, {"日文": "携帯電話", "假名": "けいたいでんわ", "中文意思": "行動電話"}, {"日文": "スマホ", "假名": "すまほ", "中文意思": "智慧型手機"}, {"日文": "豚肉", "假名": "ぶたにく", "中文意思": "豬肉"}, {"日文": "鶏肉", "假名": "とりにく", "中文意思": "雞肉"}, {"日文": "腕時計", "假名": "うでとけい", "中文意思": "手錶"}, {"日文": "音楽を聴く", "假名": "おんがくをきく", "中文意思": "聽音樂"}, {"日文": "象", "假名": "ぞう", "中文意思": "大象"}, {"日文": "鼻", "假名": "はな", "中文意思": "鼻子"}, {"日文": "耳", "假名": "みみ", "中文意思": "耳朵"}, {"日文": "果物", "假名": "くだもの", "中文意思": "水果"}, {"日文": "新聞", "假名": "しんぶん", "中文意思": "報紙"}, {"日文": "ニュースを見る", "假名": "にゅーすをみる", "中文意思": "看新聞"}, {"日文": "看板", "假名": "かんばん", "中文意思": "招牌"}, {"日文": "黒板", "假名": "こくばん", "中文意思": "黑板"}, {"日文": "黒い", "假名": "くろい", "中文意思": "黑色的"}, {"日文": "引き出し", "假名": "ひきだし", "中文意思": "抽屜"}, {"日文": "引く", "假名": "ひく", "中文意思": "拉"}, {"日文": "出す", "假名": "だす", "中文意思": "拿出"}, {"日文": "メロンパン", "假名": "めろんぱん", "中文意思": "哈密瓜麵包"}, {"日文": "鉛筆", "假名": "えんぴつ", "中文意思": "鉛筆"}, {"日文": "乾杯", "假名": "かんぱい", "中文意思": "乾杯"}, {"日文": "扇風機", "假名": "せんぷうき", "中文意思": "電風扇"}, {"日文": "天ぷら", "假名": "てんぷら", "中文意思": "天婦羅"}, {"日文": "先輩", "假名": "せんぱい", "中文意思": "前輩"}, {"日文": "後輩", "假名": "こうはい", "中文意思": "後輩"}, {"日文": "散歩する", "假名": "さんぽする", "中文意思": "散步"}, {"日文": "明後日", "假名": "あさって", "中文意思": "後天"}, {"日文": "生活", "假名": "せいかつ", "中文意思": "生活"}, {"日文": "休む", "假名": "やすむ", "中文意思": "休息"}, {"日文": "プレゼント", "假名": "ぷれぜんと", "中文意思": "禮物"}, {"日文": "素敵", "假名": "すてき", "中文意思": "很棒、很漂亮"}, {"日文": "凄い", "假名": "すごい", "中文意思": "厲害"}, {"日文": "素晴らしい", "假名": "すばらしい", "中文意思": "很棒"}, {"日文": "彼氏", "假名": "かれし", "中文意思": "男朋友"}, {"日文": "優しい", "假名": "やさしい", "中文意思": "溫柔"}, {"日文": "彼女", "假名": "かのじょ", "中文意思": "女朋友"}, {"日文": "可愛い", "假名": "かわいい", "中文意思": "可愛"}, {"日文": "大家さん", "假名": "おおやさん", "中文意思": "房東"}, {"日文": "大人", "假名": "おとな", "中文意思": "大人"}, {"日文": "帰る", "假名": "かえる", "中文意思": "回家"}, {"日文": "終わる", "假名": "おわる", "中文意思": "結束"}, {"日文": "お茶", "假名": "おちゃ", "中文意思": "茶"}, {"日文": "お酒", "假名": "おさけ", "中文意思": "酒"}, {"日文": "結構", "假名": "けっこう", "中文意思": "不用了、足夠了"}, {"日文": "コーヒー", "假名": "こーひー", "中文意思": "咖啡"}, {"日文": "ビール", "假名": "びーる", "中文意思": "啤酒"}, {"日文": "濃い", "假名": "こい", "中文意思": "濃"}, {"日文": "所", "假名": "ところ", "中文意思": "地方"}, {"日文": "服", "假名": "ふく", "中文意思": "衣服"}, {"日文": "着物", "假名": "きもの", "中文意思": "和服"}, {"日文": "脂っこい", "假名": "あぶらっこい", "中文意思": "油膩的"}, {"日文": "辛い", "假名": "からい", "中文意思": "辣的"}, {"日文": "うるさい", "假名": "うるさい", "中文意思": "吵的"}, {"日文": "美味しい", "假名": "おいしい", "中文意思": "好吃"}, {"日文": "優しくない", "假名": "やさしくない", "中文意思": "不溫柔"}, {"日文": "格好いい", "假名": "かっこういい", "中文意思": "帥氣"}, {"日文": "かっこよくない", "假名": "かっこよくない", "中文意思": "不帥氣"}, {"日文": "面白くない", "假名": "おもしろくない", "中文意思": "不好笑、沒趣"}, {"日文": "夜", "假名": "よる", "中文意思": "晚上"}, {"日文": "晩", "假名": "ばん", "中文意思": "晚上"}, {"日文": "一昨日", "假名": "おととい", "中文意思": "前天"}, {"日文": "大変", "假名": "たいへん", "中文意思": "很糟糕、很辛苦"}, {"日文": "女の人", "假名": "おんなのひと", "中文意思": "女人"}, {"日文": "綺麗", "假名": "きれい", "中文意思": "漂亮"}, {"日文": "高い", "假名": "たかい", "中文意思": "高的、貴的"}, {"日文": "いい", "假名": "いい", "中文意思": "好的"}, {"日文": "嬉しい", "假名": "うれしい", "中文意思": "開心（當下）"}, {"日文": "楽しい", "假名": "たのしい", "中文意思": "開心（整天）"}, {"日文": "親切", "假名": "しんせつ", "中文意思": "親切"}, {"日文": "有名", "假名": "ゆうめい", "中文意思": "有名"}, {"日文": "賑やか", "假名": "にぎやか", "中文意思": "熱鬧"}, {"日文": "面白い", "假名": "おもしろい", "中文意思": "有趣"}, {"日文": "キャベツ", "假名": "きゃべつ", "中文意思": "高麗菜"}];

// ---- Speech Synthesis ----
let voices = [];
function loadVoices() { voices = window.speechSynthesis.getVoices(); }
if ('speechSynthesis' in window) { loadVoices(); window.speechSynthesis.onvoiceschanged = loadVoices; }
function speak(text, lang='ja-JP') {
  if (!('speechSynthesis' in window)) { alert('此瀏覽器不支援發音'); return; }
  const u = new SpeechSynthesisUtterance(text);
  u.lang = lang;
  const pref = voices.find(v => v.lang === lang) || voices.find(v => v.lang.startsWith(lang.split('-')[0]));
  if (pref) u.voice = pref;
  window.speechSynthesis.cancel();
  window.speechSynthesis.speak(u);
}

// ---- UI / Render ----
let quizMode = false;
let CURRENT = [...DATA];

function cardTemplate(item, idx) {
  const showKana = quizMode ? '' : item['假名'];
  const showZh = quizMode ? '' : item['中文意思'];
  return `
  <div class="card" data-idx="${idx}">
    <div class="jp">${item['日文']}</div>
    <div class="kana">/${showKana}/</div>
    <div class="zh">${showZh}</div>
    <div class="actions">
      <button class="pill" data-act="speakJP">🔊 日文</button>
      ${quizMode ? '' : '<button class="pill" data-act="speakKana">🔊 假名</button>'}
      ${quizMode ? '' : '<button class="pill" data-act="speakZH">🔊 中文</button>'}
      <button class="pill" data-act="copy">複製</button>
    </div>
    ${quizMode ? '<div class="quiz" style="margin-top:8px; font-size:14px; color:var(--muted)">（點一下卡片翻開答案）</div>' : ''}
  </div>`;
}

function render(list) {
  grid.innerHTML = list.map(cardTemplate).join('');
  empty.style.display = list.length ? 'none' : 'block';
}

const grid = document.getElementById('grid');
const empty = document.getElementById('empty');
render(CURRENT);

// 事件
document.getElementById('q').addEventListener('input', (e)=>{ CURRENT = filter(e.target.value); render(CURRENT); });
document.getElementById('shuffle').addEventListener('click', ()=>{ CURRENT = shuffle(CURRENT); render(CURRENT); });
document.getElementById('ttsAll').addEventListener('click', ttsAll);
document.getElementById('addToHome').addEventListener('click', ()=>{ alert('在 Safari：分享 ➜ 加到主畫面；在 Android Chrome：選單 ⋮ ➜ 加到主畫面。'); });
document.getElementById('quizToggle').addEventListener('click', (e)=>{ quizMode = !quizMode; e.target.style.background = quizMode ? '#2d365f' : 'var(--card)'; render(CURRENT); });

grid.addEventListener('click', function(e) {
  const card = e.target.closest('.card');
  if (!card) return;
  const idx = Number(card.dataset.idx);
  const item = CURRENT[idx];
  const actBtn = e.target.closest('button.pill');
  if (actBtn) {
    const act = actBtn.dataset.act;
    if (act === 'speakJP') speak(item['日文'],'ja-JP');
    if (act === 'speakKana') speak(item['假名'],'ja-JP');
    if (act === 'speakZH') speak(item['中文意思'],'zh-TW');
    if (act === 'copy') navigator.clipboard.writeText(`${item['日文']}\n${item['假名']}\n${item['中文意思']}`);
    return;
  }
  // 測驗模式翻面
  if (quizMode) {
    const kanaEl = card.querySelector('.kana');
    const zhEl = card.querySelector('.zh');
    kanaEl.textContent = `/${item['假名']}/`;
    zhEl.textContent = item['中文意思'];
  }
});

// 工具函式
function filter(q) {
  const k = q.trim();
  if (!k) return [...DATA];
  return DATA.filter(it => (it['日文']||'').includes(k) || (it['假名']||'').includes(k) || (it['中文意思']||'').includes(k));
}
function shuffle(arr) { for (let i=arr.length-1;i>0;i--) { const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; } return arr; }
function ttsAll() {
  if (!CURRENT.length) return;
  if (!('speechSynthesis' in window)) { alert('此瀏覽器不支援發音'); return; }
  window.speechSynthesis.cancel();
  const seq = CURRENT.slice(0, 50);
  let i = 0;
  function next() {
    if (i >= seq.length) return;
    const it = seq[i++];
    const u = new SpeechSynthesisUtterance(`${it['日文']}。${it['假名']}。`);
    u.lang = 'ja-JP';
    u.onend = next;
    speechSynthesis.speak(u);
  }
  next();
}
</script>
</body>
</html>
